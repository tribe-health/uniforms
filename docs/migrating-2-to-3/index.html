<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="uniforms Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="uniforms Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-136559762-4","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-5RFDRMB"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-5RFDRMB",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="uniforms" href="/opensearch.xml"><title data-react-helmet="true">Migrating v2 to v3 | uniforms</title><meta data-react-helmet="true" property="og:url" content="https://uniforms.tools//docs/migrating-2-to-3"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Migrating v2 to v3 | uniforms"><meta data-react-helmet="true" name="description" content="This guide is designed to help you through the migration. If you went through it and encountered any problems - do let us know. For more information on why certain changes were made, see the CHANGELOG.md. When migrating to v3, use the newest version. Gradual updates will take more time and won&#x27;t ease this process."><meta data-react-helmet="true" property="og:description" content="This guide is designed to help you through the migration. If you went through it and encountered any problems - do let us know. For more information on why certain changes were made, see the CHANGELOG.md. When migrating to v3, use the newest version. Gradual updates will take more time and won&#x27;t ease this process."><link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://uniforms.tools//docs/migrating-2-to-3"><link data-react-helmet="true" rel="alternate" href="https://uniforms.tools//docs/migrating-2-to-3" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://uniforms.tools//docs/migrating-2-to-3" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.eac25182.css">
<link rel="preload" href="/assets/js/styles.cf34f5f7.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.938f36c9.js" as="script">
<link rel="preload" href="/assets/js/main.56dc0938.js" as="script">
<link rel="preload" href="/assets/js/common.fbb3d1d2.js" as="script">
<link rel="preload" href="/assets/js/3.f39d345b.js" as="script">
<link rel="preload" href="/assets/js/2456424e.fd20046e.js" as="script">
<link rel="preload" href="/assets/js/38.61cc1ca9.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.a138afdd.js" as="script">
<link rel="preload" href="/assets/js/17896441.29b453f7.js" as="script">
<link rel="preload" href="/assets/js/ceaf42d5.a37ff1b3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_3wvD">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/uniforms.svg" alt="uniforms logo" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="/img/uniforms.svg" alt="uniforms logo" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/what-are-uniforms">Docs</a><a class="navbar__item navbar__link" href="/docs/tutorials-basic-uniforms-usage">Tutorial</a><a class="navbar__item navbar__link" href="/playground">Playground</a><a href="https://github.com/vazco/uniforms" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2XYw"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_2wFP">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_2wFP">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/uniforms.svg" alt="uniforms logo" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="/img/uniforms.svg" alt="uniforms logo" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/what-are-uniforms">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorials-basic-uniforms-usage">Tutorial</a></li><li class="menu__list-item"><a class="menu__link" href="/playground">Playground</a></li><li class="menu__list-item"><a href="https://github.com/vazco/uniforms" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_3jyA"><div class="docSidebarContainer_3jRz" role="complementary"><div class="sidebar_2j-V"><div class="menu menu--responsive thin-scrollbar menu_1Xkn"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Vtis" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_24Nz">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/what-are-uniforms">What are uniforms?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/compare-matrix">Comparison matrix</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_24Nz">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq">FAQ</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/migrating-2-to-3">Migrating v2 to v3</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_24Nz">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials-basic-uniforms-usage">Basic uniforms usage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials-customizing-your-form-layout">Customizing your form layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials-using-predefined-fields">Using predefined fields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials-creating-custom-field">Creating a custom field</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials-creating-custom-theme">Creating a custom theme</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_24Nz">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples-common-forms">Common forms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples-custom-fields">Custom fields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples-custom-bridge">Custom bridge &amp; validator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples-custom-form">Custom form</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_24Nz">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-forms">Forms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-fields">Fields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-bridges">Bridges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-context-data">Context data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-helpers">Helpers</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_24Nz">Under The Hood</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/uth-autofield-algorithm">AutoField algorithm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/uth-bridge-concept">Bridge concept</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2Hma"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_1Kc0"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_28SP"><div class="container padding-vert--lg docItemWrapper_3ZSj"><div class="row"><div class="col docItemCol_1o9i"><div class="docItemContainer_3nUq"><article><header><h1 class="docTitle_33JP">Migrating v2 to v3</h1></header><div class="markdown"><p>This guide is designed to help you through the migration. If you went through it and encountered any problems - do let us know. For more information on <em>why</em> certain changes were made, see the <a href="https://github.com/vazco/uniforms/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer"><code>CHANGELOG.md</code></a>. When migrating to v3, use the newest version. Gradual updates will take more time and won&#x27;t ease this process.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="breaking-api-changes"></a>Breaking API changes<a class="hash-link" href="#breaking-api-changes" title="Direct link to heading">#</a></h2><ul><li>Context data shape has changed: <code>changed</code>, <code>changedMap</code>, <code>submitting</code>, and <code>validating</code> were lifted from the <code>state</code> property to the root.</li><li>Removed <code>AutoForm.state.modelSync</code>. Use <code>AutoForm.state.model</code> instead.</li><li>Removed <code>BaseField</code>. Use <code>connectField</code> or <code>useField</code> instead.</li><li>Removed <code>BaseForm.getChangedKeys</code>. Use <code>changedKeys</code> directly.</li><li>Removed <code>BaseForm.state.bridge</code>. Use <code>BaseForm.props.schema</code> instead.</li><li>Removed <code>Bridge.check</code>. Without <code>createSchemaBridge</code> it&#x27;s no longer needed.</li><li>Removed <code>baseField</code> from <code>connectField</code> options. There&#x27;s no one solution here and it may require additional changes, depending on the usage.</li><li>Removed <code>createSchemaBridge</code>. Now all <code>*Bridge</code> instances have to be created manually.<div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q diff"><div tabindex="0" class="prism-code language-diff codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> import { SimpleSchema } from &#x27;simpl-schema&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> import { SimpleSchema2Bridge } from &#x27;uniforms-bridge-simple-schema-2&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> const schema = new SimpleSchema({ /* ... */ });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> &lt;AutoForm schema={schema} /&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> const bridge = new SimpleSchema2Bridge(schema);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> &lt;AutoForm schema={bridge} /&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div></li><li>Removed <code>ensureValue</code> from <code>connectField</code> options. That means <code>undefined</code> will no longer be automatically passed to the field as <code>&#x27;&#x27;</code>. Use <code>value ?? &#x27;&#x27;</code> instead. <strong>This option was enabled by default, therefore it will impact all your custom fields</strong>.</li><li>Removed <code>includeParent</code> from <code>connectField</code> options. Use <code>useField</code> as many times as needed instead.<div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q tsx"><div tabindex="0" class="prism-code language-tsx codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> parentName </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">joinName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">joinName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> parentField </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">parentName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> absoluteName</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div></li><li>Removed <code>injectName</code>. In most cases, it can be safely omitted.</li><li>Removed <code>mapProps</code> from <code>connectField</code> options. Map props directly in the component.</li><li>Removed <code>nothing</code>. Use <code>null</code> instead.</li><li>Removed all <code>propTypes</code> in favor of TypeScript types.</li><li>Renamed or removed deprecated lifecycle methods. If you were using them, e.g. <code>super.componentWillReceiveProps</code>, check whether it&#x27;s still there and use the correct name if needed.</li><li>Renamed <code>getChildContext*</code> methods to <code>getContext*</code>, e.g. <code>getChildContextName</code> -&gt; <code>getContextName</code>.</li><li>Synchronous return and throw in <code>onSubmit</code> are no longer allowed. To return an error or some result, return a <code>Promise</code> instead.</li><li><code>filterDOMProps.registered</code> is now read-only.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="validation-flow-changes"></a>Validation flow changes<a class="hash-link" href="#validation-flow-changes" title="Direct link to heading">#</a></h2><ul><li>Bridge validators have to return errors instead of throwing them.<div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q diff"><div tabindex="0" class="prism-code language-diff codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> // GraphQL Schema</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> function validator(model) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   if (errors.length) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)">     throw { details: validator.errors };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">     return { details: validator.errors };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q diff"><div tabindex="0" class="prism-code language-diff codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> // JSON Schema</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> function createValidator(schema) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   const validator = ajv.compile(schema);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   return (model) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     validator(model);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     if (validator.errors &amp;&amp; validator.errors.length) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)">       throw { details: validator.errors };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">       return { details: validator.errors };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line"> }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div></li><li>Removed <code>onSubmitSuccess</code> and <code>onSubmitFailure</code>. Perform all needed operations directly in the <code>onSubmit</code>:<div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q diff"><div tabindex="0" class="prism-code language-diff codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> onSubmit={onSubmit}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> onSubmitSuccess={onSubmitSuccess}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> onSubmitFailure={onSubmitFailure}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> onSubmit={model =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">   const result = onSubmit(model);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">   result.then(onSubmitSuccess, onSubmitFailure);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">   return result;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> }}`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div></li><li><code>onValidate</code> is no longer using callbacks. The error (or the lack of it) has to be returned either synchronously or asynchronously (i.e. wrapped in a promise).<div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q diff"><div tabindex="0" class="prism-code language-diff codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"> onValidate={(model, error, done) =&gt; done(error)}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)"> onValidate={async (model, error) =&gt; error}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="react-context-api"></a>React Context API<a class="hash-link" href="#react-context-api" title="Direct link to heading">#</a></h2><ul><li>If you were <strong>not</strong> using <code>context</code>, <code>contextTypes</code>, <code>childContextTypes</code>, or <code>getChildContext*</code> methods directly, there&#x27;s nothing to do.</li><li>For direct context access, use <code>useForm</code> hook (functional components), <code>contextType</code> static property (class components), or <code>&lt;context.Consumer /&gt;</code> (both).<ul><li>The React context object, <code>context</code>, is exported from the <code>uniforms</code> package.</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="typescript"></a>TypeScript<a class="hash-link" href="#typescript" title="Direct link to heading">#</a></h2><ul><li>A lot of types were added or changed. If you are using TypeScript, you may expect some type errors, as all components are no longer full of <code>any</code>.</li><li><code>filterDOMProps.register</code> is now type safe and requires <code>FilterDOMProps</code> interface extension.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="miscellaneous"></a>Miscellaneous<a class="hash-link" href="#miscellaneous" title="Direct link to heading">#</a></h2><ul><li>For performance reasons <code>getField</code>, <code>getSubfields</code>, and <code>getType</code> of all bridges are now memoized. If possible, do the same for custom bridges for a potential performance gain.</li><li>Simplified <code>NumField</code> in most themes as it works as expected in React 16 and later. If you have a custom <code>NumField</code> in your project, do revise its implementation for a potential performance gain.</li><li>Stop using direct imports and use named ones instead. It&#x27;ll let your bundler decide, which version it&#x27;ll need.<div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q diff"><div tabindex="0" class="prism-code language-diff codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted prefix deleted" style="color:rgb(255, 85, 114)">-</span><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)">import BaseForm from &#x27;uniforms/BaseForm&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted line" style="color:rgb(255, 85, 114)"></span><span class="token inserted-sign inserted prefix inserted" style="color:rgb(195, 232, 141)">+</span><span class="token inserted-sign inserted line" style="color:rgb(195, 232, 141)">import { BaseForm } from &#x27;uniforms&#x27;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_1mju">Copy</button></div></div></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/faq"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« FAQ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorials-basic-uniforms-usage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Basic uniforms usage Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3J2a thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#breaking-api-changes" class="table-of-contents__link">Breaking API changes</a></li><li><a href="#validation-flow-changes" class="table-of-contents__link">Validation flow changes</a></li><li><a href="#react-context-api" class="table-of-contents__link">React Context API</a></li><li><a href="#typescript" class="table-of-contents__link">TypeScript</a></li><li><a href="#miscellaneous" class="table-of-contents__link">Miscellaneous</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/styles.cf34f5f7.js"></script>
<script src="/assets/js/runtime~main.938f36c9.js"></script>
<script src="/assets/js/main.56dc0938.js"></script>
<script src="/assets/js/common.fbb3d1d2.js"></script>
<script src="/assets/js/3.f39d345b.js"></script>
<script src="/assets/js/2456424e.fd20046e.js"></script>
<script src="/assets/js/38.61cc1ca9.js"></script>
<script src="/assets/js/935f2afb.a138afdd.js"></script>
<script src="/assets/js/17896441.29b453f7.js"></script>
<script src="/assets/js/ceaf42d5.a37ff1b3.js"></script>
</body>
</html>